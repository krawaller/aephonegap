(function(){var exportTo,helpers,print,printtexts,printwrap;if(typeof require==="function"){helpers=require("./helpers");printtexts=require("./texts_parser").parser.print}else{helpers=this.CATS.app.helpers;printtexts=this.CATS.texts.parser.print}printwrap=function(o,pre,markpaths,block,settings,nomark){if(settings==null){settings={lang:"en"}}return print(o,pre,markpaths,void 0,void 0,void 0,settings,nomark)};print=function(o,pre,markpaths,me,parenttype,mypos,settings,nomark){var base,child,classes,denom,exp,first,i,numer,op,ret,second,signs,str,v;if(me==null){me=[]}classes=o.type;if(o.isblock){classes+=" isblock"}str=function(){var _i,_j,_k,_len,_len1,_len2,_ref,_ref1,_ref2,_ref3,_ref4,_ref5;switch(o.type){case"BOOLEAN":return"	ext{"+(o.val==="false"?"false":"true")+"}";case"NOT":return"&#xac;"+print(o.objs[0],pre,markpaths,me.concat([0]),"NOT",0,settings);case"XOR":first=print(o.objs[0],pre,markpaths,me.concat([0]),o.type,0,settings);second=print(o.objs[1],pre,markpaths,me.concat([1]),o.type,1,settings);op="&#8891;";return""+first+op+second;case"AND":case"OR":op={AND:"&#x2227;",OR:"&#x2228;"}[o.type];ret="";_ref=o.objs;for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){v=_ref[i];ret+=print(o.objs[i],pre,markpaths,me.concat([i]),o.type,i,settings);if(i<o.objs.length-1){ret+=""+op}}return ret+"";case"number":return""+(settings.lang==="sv"?o.val.replace(".",","):o.val);case"void":return"<mstyle mathcolor='red'><mi>&#8224;</mi></mstyle>";case"fraction":numer=print(o.objs[0],pre,markpaths,me.concat([0]),"fraction",0,settings);denom=print(o.objs[1],pre,markpaths,me.concat([1]),"fraction",1,settings);return"<mfrac class='"+classes+"'>"+((_ref1=numer.type)==="sum"||_ref1==="product"?numer:"<mrow>"+numer+"</mrow>")+((_ref2=denom.type)==="sum"||_ref2==="product"?denom:"<mrow>"+denom+"</mrow>")+"</mfrac>";case"demo":return"<mrow>"+print(o.objs[0],pre,markpaths,me.concat([0]),"demo",0,settings)+"<mo>&#8596;</mo>"+print(o.objs[1],pre,markpaths,me.concat([1]),"demo",1,settings)+"</mrow>";case"gives":return"<mrow>"+print(o.objs[0],pre,markpaths,me.concat([0]),"demo",0,settings)+"<mo>&rarr;</mo>"+print(o.objs[1],pre,markpaths,me.concat([1]),"demo",1,settings)+"</mrow>";case"sum":ret="";_ref3=o.objs;for(i=_j=0,_len1=_ref3.length;_j<_len1;i=++_j){v=_ref3[i];child=print(v,pre,markpaths,me.concat([i]),"sum",i,settings);ret+=child;if(i<o.objs.length-1&&!(i<o.objs.length-1&&((_ref4=o.objs[i+1].type)==="negation"||_ref4==="plusminus"))){ret+="<mo>+</mo>"}else{ret+=" "}}return"<mrow>"+ret+"</mrow>";case"product":ret="";_ref5=o.objs;for(i=_k=0,_len2=_ref5.length;_k<_len2;i=++_k){v=_ref5[i];child=print(v,pre,markpaths,me.concat([i]),"product",i,settings);ret+=child;if(i<o.objs.length-1){ret+="<mo>&middot;</mo>"}}return"<mrow>"+ret+"</mrow>";case"variable":return"<mi>"+o.val+"</mi>";case"power":base=print(o.objs[0],pre,markpaths,me.concat([0]),"power",0,settings);exp=print(o.objs[1],pre,markpaths,me.concat([1]),"power",1,settings);return"<msup class='"+classes+"'>"+base+"<mrow>"+exp+"</mrow></msup>";case"negation":return"<mrow><mo>&#8722;</mo>"+print(o.objs[0],pre,markpaths,me.concat([0]),"negation",0,settings)+"</mrow>";case"plusminus":return"<mrow><mo>&#177;</mo>"+print(o.objs[0],pre,markpaths,me.concat([0]),"plusminus",0,settings)+"</mrow>";case"concept":return"<mrow><mi>&quot;"+o.val+"&quot;</mi></mrow>";case"relation":signs={eq:"&#61;",lt:"&#60",gt:"&#62",leq:"&#60;&#61;",geq:"&#62;&#61;"};return"<mrow>"+print(o.objs[0],pre,markpaths,me.concat([0]),"relation",0,settings)+("<mo>"+signs[o.val||"eq"]+"</mo>")+print(o.objs[1],pre,markpaths,me.concat([1]),"relation",1,settings)+"</mrow>";case"function":return"<mrow><mi>"+o.val+"</mi><mfenced separators=''>"+print(o.objs[0],pre,markpaths,me.concat([0]),"function",0,settings)+"</mfenced></mrow>";case"const":switch(o.val){case"pi":return"<mi>&#960;</mi>";case"undefined":return"<mi>"+printtexts["undefined"][settings.lang]+"</mi>";case"percent":return"<mi>%</mi>";default:return"<mi>"+o.val+"</mi>"}break;case"true":case"false":return"<mi>"+printtexts[o.type][settings.lang]+"</mi>";case"root":if(o.objs[1].type==="number"&&o.objs[1].val==="2"){return"<msqrt>"+print(o.objs[0],pre,markpaths,me.concat([0]),"root",0,settings)+"</msqrt>"}else{return"<mroot>"+print(o.objs[0],pre,markpaths,me.concat([0]),"root",0,settings)+print(o.objs[1],pre,markpaths,me.concat([1]),"root",1,settings)+"</mroot>"}break;default:return"<mi>"+o.type+"</mi>"}}();if(helpers.needsparens(o,parenttype,mypos)){str="<mfenced separators=''>"+str+"</mfenced>"}if(!nomark){if(helpers.matchAddress(me,[],[pre])){str="<mstyle mathbackground='"+(!(markpaths.length||true)?"#C7D3FF":"#E7EDFF")+"'>"+str+"</mstyle>"}else if(helpers.matchAddress(me,pre,markpaths)){str="<mstyle mathbackground='#C7D3FF'>"+str+"</mstyle>"}}return str};if(typeof exports==="undefined"){exportTo=this.CATS.app}else{exportTo=exports}exportTo.mathmlprinter=printwrap}).call(this);