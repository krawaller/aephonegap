(function(){CATS.bb.ToolIndexView=CATS.bb.RootView.extend({template:$("#toolindextemplate").html(),tagName:"div",localizeid:"toolindex",className:"toolindex viewbox",initialize:function(o){this.listenTo(Backbone,"setlang",this.changeIndex);return this.constructor.__super__.initialize.apply(this,[o])},events:{radiobtnselect:"changeFilter"},render:function(){var lang,list,listitems,toolindex,w,_i,_len;this.setContent(this.template);this.setTitle("toolindexheadline","tool",true);this.setUI("toollist","complexityval","effectval","toollistfilter","filterexplanation");this.localize();lang=CATS.settings.lang;toolindex=CATS.texts.toolIndex[lang];listitems=[];for(_i=0,_len=toolindex.length;_i<_len;_i++){w=toolindex[_i];listitems.push(this.toolLink(w[0],lang,false,w[2].concat("toolitem")))}list=$("<div class='davidlist'>"+listitems.join("")+"</div>");this.ui.toollist.append(list);this.ui[lang+"list"]=list;this.changeFilter();return this},changeFilter:function(e,f,g){var complclass;this.complexity=this.ui.complexityval.val();complclass={atomic:"hidecomplex",complex:"hideatomic"}[this.complexity];this.effect=this.ui.effectval.val();this.ui.toollistfilter.attr("class",complclass+" show"+this.effect);return this.changeExplanation()},localizeSpecial:function(){return this.changeExplanation()},changeExplanation:function(){var kind,mytext;mytext=function(){var _i,_len,_ref,_results;_ref=["start",this.complexity,"middle",this.effect];_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){kind=_ref[_i];_results.push(this.getText(["ui","toolindex","lead"+kind,CATS.settings.lang],true,false,true))}return _results}.call(this).join(" ");console.log("COMPL",this.complexity,"EFFECT",this.effect);mytext+=" <span class='smalltext'>("+(CATS.math.count[this.complexity+this.effect]||0)+" "+this.getText(["ui","toolindex","outof",CATS.settings.lang],true)+" "+CATS.math.count.total+")</span>";return this.ui.filterexplanation.html(CATS.texts.processText(mytext,CATS.settings.lang))}})}).call(this);