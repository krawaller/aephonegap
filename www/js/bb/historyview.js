(function(){CATS.bb.HistoryView=CATS.bb.BaseView.extend({template:$("#historyviewtemplate").html(),localizeid:"historyview",className:"historyview emptyhistory",events:{"click .historyitem":"clickedHistoryItem"},initialize:function(o){this.strings=[];this.listenTo(Backbone,"updatedhistory",this.render);this.listenTo(Backbone,"setlang",this.render);return this.constructor.__super__.initialize.apply(this,[o])},render:function(){this.$el.html(this.template);this.setUI("historyinstruction","historylist");this.localize();this.drawHistory();return this},clickedHistoryItem:function(e){Backbone.trigger("inputparsertext",$(e.currentTarget).text());return Backbone.trigger("closemodal")},drawHistory:function(){var arr,date,example,list,strings,_i,_len,_ref;arr=[];_ref=CATS.history;for(date in _ref){strings=_ref[date];if(!(date!=="all")){continue}for(_i=0,_len=strings.length;_i<_len;_i++){example=strings[_i];arr.push("<a href='#' class='historyitem davidlink'>"+this.escapeStr(example)+"</a>")}arr.push("<h5 class='nav-header'>"+date+"</h5>")}if(arr.length){this.$el.removeClass("emptyhistory")}list=$(["<div class='davidlist'>"].concat(arr.reverse().concat(["</div>"])).join(""));return this.$el.append(list)}})}).call(this);