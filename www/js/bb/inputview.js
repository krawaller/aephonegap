(function(){CATS.bb.InputView=CATS.bb.BaseView.extend({tagName:"div",localizeid:"input",className:"inputview absbox padbox",events:{"click .cancelbutton":"cancelInputView","click .calcbutton":"remoteCalcTrigger"},initialize:function(o){this.listenTo(Backbone,"focusTextField",this.focusTextField,this);this.listenTo(Backbone,"mathEntry",this.mathEntry,this);return this.constructor.__super__.initialize.apply(this,[o])},template:$("#inputviewtemplate").html(),render:function(){this.$el.html(this.template);this.setUI("math","struct","cancelbutton","calcbutton");this.localize();return this},focusTextField:function(){this.ui.struct.empty();this.ui.math.empty();return console.log("FOCUSED")},remoteCalcTrigger:function(){return Backbone.trigger("remoteCalcTrigger")},cancelInputView:function(){return Backbone.trigger("blurTextField")},blurTextField:function(){return console.log("BLURRED")},mathEntry:function(txt){var mathml,parsedtxt;console.log("MATHENTRY",txt);parsedtxt=CATS.app.parseExpression(txt,CATS.settings);mathml=CATS.app.mathmlprinter(parsedtxt,[],[],CATS.settings,true);this.ui.struct.html(CATS.app.objprinter(parsedtxt,[],[]));this.ui.math.html(mathml);return this.typeset(this.ui.math)}})}).call(this);