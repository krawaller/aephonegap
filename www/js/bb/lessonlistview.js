(function(){CATS.bb.LessonListView=CATS.bb.BaseView.extend({template:$("#lessonlisttemplate").html(),tagName:"div",className:"lessonindex davidmodalcontent",localizeid:"lessonindex",initialize:function(o){this.constructor.__super__.initialize.apply(this,[o]);this.listenTo(Backbone,"setlang",this.changeIndex);return this.lessonLinkAware()},render:function(){var lang,lessondef,lessonid,lessons,list,listitems,_i,_len,_ref;this.$el.html(this.template);this.setUI("lessonlist");this.localize();_ref=["en","sv"];for(_i=0,_len=_ref.length;_i<_len;_i++){lang=_ref[_i];lessons=CATS.school.lessons;listitems=[];for(lessonid in lessons){lessondef=lessons[lessonid];listitems.push(this.lessonLink(lessonid))}list=$("<div class='davidlist'>"+listitems.join("")+"</div>");this.ui.lessonlist.append(list);this.ui[lang+"list"]=list}this.changeIndex(CATS.settings.lang);return this},changeIndex:function(lang){var fromlang;fromlang={en:"sv",sv:"en"}[lang];console.log("WHATTHEEFF",lang,fromlang);this.ui[fromlang+"list"].detach();return this.ui.lessonlist.append(this.ui[lang+"list"])}})}).call(this);