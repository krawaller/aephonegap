(function(){CATS.bb.LanguageSelectView=CATS.bb.BaseView.extend({template:$("#languageselectviewtemplate").html(),tagName:"div",localizeid:"languageselect",className:"languageselect davidmodalcontent",events:{"click .englishbutton":"setEnglish","click .swedishbutton":"setSwedish"},setEnglish:function(){return this.setLang("en")},setSwedish:function(){return this.setLang("sv")},toggleTextReport:function(){CATS.settings.textreportmode=CATS.settings.textreportmode==="yes"?"no":"yes";return Backbone.trigger("settextreportmode")},initialize:function(o){return this.constructor.__super__.initialize.apply(this,[o])},render:function(){var info;this.$el.html(this.template);this.localize();this.setUI("infolist");this.ui.infolist.html(function(){var _results;_results=[];for(info in CATS.texts.info){_results.push(this.infoLink(info,console.log("INFO",info)))}return _results}.call(this).join(""));return this},setLang:function(lang){CATS.settings.lang=lang;this.buildTemplates(lang);Backbone.trigger("setlang",lang);return this.kill()},buildTemplates:function(lang){var locid,selector,tobefixed;CATS.cache.templates={};tobefixed={"#wordviewtemplate":"word","#toolinfoviewtemplate":"toolinfo","#lessonviewtemplate":"lesson"};for(selector in tobefixed){locid=tobefixed[selector];CATS.cache.templates[selector]=this.buildTemplate(selector,locid,lang)}return $("#templates").remove()},buildTemplate:function(templatesel,localizeid,lang){var templ,text,textid,ui;templ=$(templatesel);ui=CATS.texts.ui[localizeid];for(textid in ui){text=ui[textid][lang];console.log("SETUPTEMPLATE",templatesel,templ.length,localizeid,textid,text,templ.find("."+textid).length);templ.find("."+textid).html(text)}return templ.html()}})}).call(this);